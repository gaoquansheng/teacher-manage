<!DOCTYPE html>
<html lang="zh-cn">
<base href="/">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <title>应急管理部紧急救援促进中心个人信息报名系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <meta http-equiv="refresh" content="1800"/>
    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="./assets/css/bootstrap.css"/>
    <link rel="stylesheet" href="./assets/css/font-awesome.css"/>
    <!-- text fonts -->
    <link rel="stylesheet" href="./assets/css/ace-fonts.css"/>
    <link rel="stylesheet" href="./assets/css/activities-serverload.css"/>
    <link rel="stylesheet" href="./assets/css/bootstrap-table.min.css"/>
    <link rel="stylesheet" href="./assets/css/bootstrap-datetimepicker.css"/>
    <!-- ace styles -->
    <link rel="stylesheet" href="./assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="./assets/css/ace-part2.css" class="ace-main-stylesheet"/>
    <![endif]-->
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="./assets/css/ace-ie.css"/>
    <![endif]-->
    <!-- ace settings handler -->
    <script src="./assets/js/ace-extra.js"></script>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media querifes -->
    <!--[if lte IE 8]>
    <script src="./assets/js/html5shiv.js"></script>
    <script src="./assets/js/respond.js"></script>
    <![endif]-->

</head>
<body class="no-skin">
<!-- #section:basics/navbar.layout -->
<div id="navbar" class="navbar navbar-default" style="height: 200px">
    <script type="text/javascript">
        try {
            ace.settings.check('navbar', 'fixed')
        } catch (e) {
        }
    </script>
    <div class="navbar-container" id="navbar-container">
        <!-- #section:basics/sidebar.mobile.toggle -->
        <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar">
            <span class="sr-only">Toggle sidebar</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <!-- /section:basics/sidebar.mobile.toggle -->
        <div class="navbar-header pull-left" style="margin-top: 60px">
            <!-- #section:basics/navbar.layout.brand -->
            <a href="#" class="navbar-brand">
                <small style="font-size: 40px">
                    <i class="fa fa-leaf"></i>应急管理部紧急救援促进中心
                </small>
            </a>

        </div>

    </div>
    <!-- /.navbar-container -->
</div>
<!-- /section:basics/navbar.layout -->
<div class="main-container" id="main-container">
    <script type="text/javascript">
        try {
            ace.settings.check('main-container', 'fixed')
        } catch (e) {
        }
    </script>
    <div class="row">
        <div class="col-sm-10 col-sm-offset-1" id="news_center" style="margin-top: 20px">
        <h1>新闻公告</h1>
        <hr>
            <table id="tb_departments" ></table>
        </div>
    </div>

    <!--底部-->
    <!-- /.main-content -->
    <div class="footer">
        <div class="footer-inner">
            <!-- #section:basics/footer -->
            <div class="footer-content">
                <span class="bigger-120"><span class="blue bolder">应急管理部紧急救援促进中心</span>&copy;2019&emsp;&emsp;&emsp;&emsp;<span class="blue bolder">防灾科技学院应急管理学院技术支持</span></span>
            </div>
            <!-- /section:basics/footer -->
        </div>
    </div>
    <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
        <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
    </a>
</div>


<!-- /.main-container -->
<!-- basic scripts -->
<!--[if !IE]> -->
<script type="text/javascript">
    window.jQuery || document.write("<script src='./assets/js/jquery.js'>" + "<" + "/script>");
</script>
<!-- <![endif]-->
<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='./assets/js/jquery1x.js'>" + "<" + "/script>");
</script>
<![endif]-->
<script type="text/javascript">
    if ('ontouchstart' in document.documentElement)
        document.write("<script src='./assets/js/jquery.mobile.custom.js'>" + "<" + "/script>");
</script>
<script src="./assets/js/bootstrap.js"></script>

<script  src="./ueditor/ueditor.config.js"></script>
<!-- 编辑器源码文件 -->
<script  src="./ueditor/ueditor.all.js"></script>

<!-- ace scripts -->
<script src="./assets/js/ace/elements.scroller.js"></script>
<script src="./assets/js/ace/elements.colorpicker.js"></script>
<script src="./assets/js/ace/elements.fileinput.js"></script>
<script src="./assets/js/ace/elements.typeahead.js"></script>
<script src="./assets/js/ace/elements.wysiwyg.js"></script>
<script src="./assets/js/ace/elements.spinner.js"></script>
<script src="./assets/js/ace/elements.treeview.js"></script>
<script src="./assets/js/ace/elements.wizard.js"></script>
<script src="./assets/js/ace/elements.aside.js"></script>
<script src="./assets/js/ace/ace.js"></script>
<!--<script src="./assets/js/ace/ace.ajax-content.js"></script>这个文件?-->
<script src="./assets/js/ace/ace.touch-drag.js"></script>
<script src="./assets/js/ace/ace.sidebar.js"></script>
<script src="./assets/js/ace/ace.sidebar-scroll-1.js"></script>
<script src="./assets/js/ace/ace.submenu-hover.js"></script>
<script src="./assets/js/ace/ace.widget-box.js"></script>
<script src="./assets/js/ace/ace.settings.js"></script>
<script src="./assets/js/ace/ace.settings-rtl.js"></script>
<script src="./assets/js/ace/ace.settings-skin.js"></script>
<script src="./assets/js/ace/ace.widget-on-reload.js"></script>
<script src="./assets/js/ace/ace.searchbox-autocomplete.js"></script>
<script src="./assets/js/date-time/moment.js"></script>
<script src="./assets/js/date-time/bootstrap-datetimepicker.js"></script>
<!-- <script src="./assets/js/date-time/locales/bootstrap-datepicker.zh-CN.js"></script> -->
<script src="./assets/js/bootstrap-table.min.js"></script>
<script src="./assets/js/bootstrap-table-zh-CN.min.js"></script>


<script>
    //测试页面
    window.onload = function (ev) {
        var TableInit = function () {
            var oTableInit = new Object();
            //初始化Table
            oTableInit.Init = function () {
                $('#tb_departments').bootstrapTable({
                    url: 'news/L_news',         //请求后台的URL（*）
                    method: 'get',                      //请求方式（*）
                    toolbar: '#toolbar',                //工具按钮用哪个容器
                    striped: true,                      //是否显示行间隔色
                    cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
                    pagination: true,                   //是否显示分页（*）
                    sortable: false,                     //是否启用排序
                    sortOrder: "asc",                   //排序方式
                    //queryParams: oTableInit.queryParams,//传递参数（*）
                    sidePagination: "client",           //分页方式：client客户端分页，server服务端分页（*）
                    pageNumber:1,                       //初始化加载第一页，默认第一页
                    pageSize: 10,                       //每页的记录行数（*）
                    pageList: [5,10, 25, 50, 100],        //可供选择的每页的行数（*）
                    search: false,                       //是否显示表格搜索，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大
                    strictSearch: false,
                    showColumns: false,                  //是否显示所有的列
                    showRefresh: false,                  //是否显示刷新按钮
                    minimumCountColumns: 2,             //最少允许的列数
                    clickToSelect: true,                //是否启用点击选中行
                    //height: 700,                        //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
                    uniqueId: "ID",                     //每一行的唯一标识，一般为主键列
                    // showToggle:true,                    //是否显示详细视图和列表视图的切换按钮
                    cardView: false,                    //是否显示详细视图
                    detailView: false,                   //是否显示父子表
                    columns: [ {
                    	field:"news_id",
                    	visible:false
                    }, {
                        field: 'news_title',
                        title: '新闻标题',
                        formatter:function(value,row,index){
                        
                            console.log(value);
                            var result = "";
                                result += "<a href='html/view_news?news_id="+row.news_id+"' target='_blank' title='查看新闻'><span class='fa fa-circle'></span>  "+value+"</a>";
                                //result += "<a><span class='glyphicon glyphicon-search'></span>halo</a>"
                            return result;
                        }
                    },  {
                        field: 'news_date',
                        title: '编辑时间',
                        formatter:function (value,row,index) {
                            var mes =  new Date(value);
                            return mes.getFullYear().toString()+"-"+(mes.getMonth()+1).toString()+"-"+mes.getDate().toString();
                        }
                    }]
                });
            };

            return oTableInit;
        };

        var ButtonInit = function () {
            var oInit = new Object();
            var postdata = {};
            oInit.Init = function () {
                //初始化页面上面的按钮事件
            };
            return oInit;
        };

        $(function () {

            //1.初始化Table
            var oTable = new TableInit();
            oTable.Init();

            //2.初始化Button的点击事件
            var oButtonInit = new ButtonInit();
            oButtonInit.Init();

        });
        function actionFormatter(value, row, index) {
            var idno = row.user_idno
            var id = value;
            var result = "";
            result += "<a href='javascript:;' class='btn btn-xs green' onclick=\"view_more('" + idno + "', view='view')\" title='查看更多'><span class='glyphicon glyphicon-tag' ></span></a>";
            return result;
        }
        $("#tb_departments").removeClass("table-bordered")
        $("#tb_departments").addClass("table-striped");
    }
    function view_news(news_id){
    	var mes = {
    			"news_id":news_id
    	};
    	var jsonData = JSON.stringify(mes);
    	$.ajax({
            type:"post",
            url: "news/find_news",
            data:jsonData,
            dataType:"json",
            contentType : "application/json;charset=UTF-8",
            success: function(result){
            	$(".row").html("<div class='col-sm-10 col-sm-offset-1' id='news_center' style='margin-top: 20px;background-color:#fcfcfc;border:#e5e5e5 1px solid;font-family:Microsoft Yahei, 宋体, sans-serif;min-height:750px'>");
            	$("#news_center").append("<div style='text-align:center'><button class='pull-left btn btn-sm btn-default' onclick='history.go(0)'>返回</button><h1 style='color:#cc3333'>"+result[0]["news_title"]+"</h1></div><hr>");
	            $("#news_center").append(result[0]["news_content"]);
                // 	$("#news_center").html(result[0]["news_content"]);
            },
            error:function(result){
                console.log(result);
            }

        });
    }

</script>

</body>
</html>
